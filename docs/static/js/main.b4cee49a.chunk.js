(this.webpackJsonp15puzzle=this.webpackJsonp15puzzle||[]).push([[0],{152:function(e,t,n){e.exports=n(269)},157:function(e,t,n){},269:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"enqueueSnackbar",(function(){return G})),n.d(a,"closeSnackbar",(function(){return N})),n.d(a,"removeSnackbar",(function(){return M})),n.d(a,"userSignUp",(function(){return R})),n.d(a,"userSignIn",(function(){return U})),n.d(a,"userSignOut",(function(){return D})),n.d(a,"clearStore",(function(){return B})),n.d(a,"userValidation",(function(){return W})),n.d(a,"setUserData",(function(){return L})),n.d(a,"setStartGame",(function(){return K})),n.d(a,"setEndGame",(function(){return P})),n.d(a,"setCountOfSteps",(function(){return F})),n.d(a,"setIsWin",(function(){return V})),n.d(a,"setBestGame",(function(){return q})),n.d(a,"setGeneralInfo",(function(){return X})),n.d(a,"setBackdrop",(function(){return H})),n.d(a,"setSkeleton",(function(){return J})),n.d(a,"setLeaderboard",(function(){return Q}));var r=n(0),i=n.n(r),c=n(11),o=n.n(c),u=(n(157),n(104)),l=Object(u.a)((function(e){return{container:{minHeight:"100vh"},gameTableWr:{width:"100%",padding:"".concat(e.spacing(3),"px !important")},gameTable:{border:"1px solid #aaa",borderRadius:16,overflow:"hidden",padding:e.spacing(1.5),position:"relative",zIndex:100},puzzles:{border:"1px solid #aaa",overflow:"hidden",borderRadius:8,fontSize:"1.5rem",background:"transparent",cursor:"pointer",userSelect:"none",zIndex:20,"&.red":{background:"rgba(255,0,0,.5)",zIndex:10,opacity:0},"&.green":{background:"rgba(0,255,0,.5)"}},height100:{height:"100%"},cardContentUser:{maxWidth:290,margin:"0 auto",position:"relative"},root:{flexGrow:1,minHeight:"100vh"},control:{padding:e.spacing(2)},backdrop:{zIndex:e.zIndex.drawer+1+"!important",color:"#fff"},userTabs:{background:"unset !important",boxShadow:"none !important"},leaderboard:{"& > *":{borderBottom:"unset !important"}}}})),s=n(327),d=n(311),f=n(83),m=n(325),p=n(326),b=n(331),h=n(25),E=n(7),g=n(129),v=n.n(g),O=function(e){var t={};switch(v.a.isEmail(e)){case!0:t={error:!1,text:""};break;case!1:t={error:!0,text:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 E-mail"}}return t},S=function(e){var t={};switch(e.length>=3){case!0:t={error:!1,text:""};break;case!1:t={error:!0,text:"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}}return t},y=function(e){var t={};switch(e.length>=6&&e.length<=20){case!0:t={error:!1,text:""};break;case!1:t={error:!0,text:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 12 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}}return t},j=function(e,t,n){return{email:Object(E.a)({},O(e)),name:Object(E.a)({},S(t)),password:Object(E.a)({},y(n))}},k=n(14),w=n(330),T=n(309),x=n(31),C=n.n(x),_=n(57),I=n(131),z=(n(236),n(238),I.initializeApp({apiKey:"AIzaSyCYLJ3y0X1TpgAP3EV2ocXRjXcapk-_MjQ",authDomain:"puzzle-4d05b.firebaseapp.com",databaseURL:"https://puzzle-4d05b.firebaseio.com",projectId:"puzzle-4d05b",storageBucket:"puzzle-4d05b.appspot.com",messagingSenderId:"457101871914",appId:"1:457101871914:web:413cd958ca292267abec53"})),A=n(333),G=function(e){var t=e.options&&e.options.key;return{type:"ENQUEUE_SNACKBAR",notification:Object(E.a)(Object(E.a)({},e),{},{key:t||(new Date).getTime()+Math.random()})}},N=function(e){return{type:"CLOSE_SNACKBAR",dismissAll:!e,key:e}},M=function(e){return{type:"REMOVE_SNACKBAR",key:e}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(){var a=Object(_.a)(C.a.mark((function a(r,c){var o,u,l,s;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r(H(!0)),a.next=3,z.auth().createUserWithEmailAndPassword(e,n).then((function(e){z.auth().currentUser.updateProfile({displayName:t}),z.database().ref("users/"+e.user.uid).set({generalInfo:{countOfGames:0,countOfSteps:0,spentTime:0},bestGame:{date:0,spentTime:0,countOfSteps:0}})})).then((function(){r(G({message:"".concat(t,", \u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b!"),options:{key:Object(A.a)(),variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"}}}))})).catch((function(e){r(G({message:e.message,options:{key:Object(A.a)(),persist:!0,variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},action:function(e){return i.a.createElement(T.a,{variant:"outlined",style:{color:"white",borderColor:"white"},onClick:function(){return r(N(e))}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c")}}}))}));case 3:o=c(),u=o.user.data,l=u.token,s=u.uid,r(L(t,l,s)),r(H(!1));case 6:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:"");return function(){var n=Object(_.a)(C.a.mark((function n(a){return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(H(!0)),n.next=3,z.auth().signInWithEmailAndPassword(e,t).catch((function(e){a(G({message:e.message,options:{key:Object(A.a)(),persist:!0,variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},action:function(e){return i.a.createElement(T.a,{variant:"outlined",style:{color:"white",borderColor:"white"},onClick:function(){return a(N(e))}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c")}}}))}));case 3:a(H(!1));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},D=function(){return function(){var e=Object(_.a)(C.a.mark((function e(t,n){var a,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n(),r=a.user.data.name,z.auth().signOut().then((function(){t(G({message:"".concat(r,", \u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u044b\u0448\u043b\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430!"),options:{key:Object(A.a)(),variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"}}})),t(B())})).catch((function(e){}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},B=function(){return{type:"USER_SIGN_OUT"}},W=function(e){return{type:"SET_USER_VALIDATION",payload:e}},L=function(e,t,n){return function(a){a({type:"SET_USER_DATA",payload:{name:e,token:t,uid:n}}),a(H(!1)),a(J(!1))}},K=function(e){return{type:"SET_START_GAME",payload:{startTime:e,endTime:0,isWin:!1,countOfSteps:0}}},P=function(e){return function(){var t=Object(_.a)(C.a.mark((function t(n,a){var r,c,o,u,l,s,d,f,m;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n({type:"SET_START_GAME",payload:{endTime:e}}),r=a(),c=r.user.stat.currentGame,o=r.user.data,u=r.user.stat.bestGame,l=r.user.stat.generalInfo,o.token)try{s=z.database().ref("users/"+o.uid).child("games").push().key,d=new Date,f={date:"".concat(String(d.getDate()).padStart(2,"0"),".").concat(String(d.getMonth()+1).padStart(2,"0"),".").concat(d.getFullYear()),countOfSteps:c.countOfSteps,spentTime:(c.endTime-c.startTime)/1e3},l.countOfSteps+=f.countOfSteps,l.spentTime+=f.spentTime,l.countOfGames++,(m={})["games/"+s]=Object(E.a)(Object(E.a)({},f),{},{user:o.name}),m["users/"+o.uid+"/games/"+s]=f,m["users/"+o.uid+"/generalInfo"]=l,(!u.spentTime||u.spentTime>f.spentTime)&&(m["users/"+o.uid+"/bestGame/"]=f),z.database().ref().update(m).catch((function(e){n(G({message:"\u041f\u0440\u0438 \u043f\u043e\u043f\u044b\u0442\u043a\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: "+e.message,options:{key:Object(A.a)(),persist:!0,variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"},action:function(e){return i.a.createElement(T.a,{variant:"outlined",style:{color:"white",borderColor:"white"},onClick:function(){return n(N(e))}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c")}}}))}))}catch(p){console.log(p)}case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},F=function(e){return{type:"SET_COUNT_OF_STEPS",payload:{countOfSteps:e}}},V=function(e){return{type:"SET_ISWIN",payload:{isWin:e}}},q=function(e){return{type:"SET_BEST_GAME",payload:Object(E.a)({},e)}},X=function(e){return{type:"SET_GENERAL_INFO",payload:e}},H=function(e){return{type:"SET_BACKDROP",payload:e}},J=function(e){return{type:"SET_SKELETON",payload:e}},Q=function(e){return{type:"SET_LEADER_BOARD",payload:e}},Y=n(312),$=n(77),Z=n.n($),ee=function(e){return Object(E.a)({},e)},te=Object(k.b)((function(e){return{user:e.user,loadingInterface:e.loading.skeleton}}),(function(e){return{CState:{userSignUp:function(t,n,a){return e(R(t,n,a))},userSignIn:function(t,n,a){return e(U(t,n,a))},userValidate:function(t){return e(W(t))}}}}))((function(e){var t=e.user,n=e.CState,a=e.loadingInterface,c=l(),o=Object(r.useState)(""),u=Object(h.a)(o,2),s=u[0],m=u[1],p=Object(r.useState)(""),E=Object(h.a)(p,2),g=E[0],v=E[1],O=Object(r.useState)(""),S=Object(h.a)(O,2),y=S[0],k=S[1],x=j,C=[ee({error:t.validation.email.error,id:"userEmail",label:"E-mail",type:"email",onChange:function(e){return m(e.target.value.trim())},fullWidth:!0,helperText:t.validation.email.error?t.validation.email.text:""}),ee({error:t.validation.name.error,id:"userName",label:"\u0418\u043c\u044f",onChange:function(e){return v(e.target.value.trim())},fullWidth:!0,helperText:t.validation.name.error?t.validation.name.text:""}),ee({error:t.validation.password.error,id:"userPass",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",onChange:function(e){return k(e.target.value.trim())},fullWidth:!0,helperText:t.validation.password.error?t.validation.password.text:""})];return i.a.createElement(d.a,{className:c.authorization,alignItems:"center",container:!0,direction:"column"},a?i.a.createElement(Y.a,{animation:"wave",variant:"circle",width:30,height:30}):i.a.createElement(Z.a,{fontSize:"large"}),i.a.createElement(b.a,{width:1,my:3},a?i.a.createElement(Y.a,{animation:"wave",height:14,width:"50%",style:{margin:"0 auto"}}):i.a.createElement(f.a,{align:"center"},"\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435")),C.map((function(e){return i.a.createElement(b.a,{key:e.id,width:1,my:1},a?i.a.createElement(Y.a,{variant:"rect",animation:"wave",height:50,width:"100%"}):i.a.createElement(w.a,e))})),i.a.createElement(b.a,{display:"flex",flexDirection:"column",width:1,my:1,mt:3},a?i.a.createElement(Y.a,{variant:"rect",animation:"wave",height:35,width:"100%"}):i.a.createElement(T.a,{onClick:function(){var e=x(s,"userName",y);0===Object.values(e).filter((function(e){return!0===e.error})).length&&n.userSignIn(s,g,y),n.userValidate(e)},variant:"outlined",color:"secondary"},"\u0412\u0445\u043e\u0434")),i.a.createElement(b.a,{display:"flex",flexDirection:"column",width:1,my:1},a?i.a.createElement(Y.a,{variant:"rect",animation:"wave",height:35,width:"100%"}):i.a.createElement(T.a,{onClick:function(){var e=x(s,g,y);0===Object.values(e).filter((function(e){return!0===e.error})).length&&n.userSignUp(s,g,y),n.userValidate(e)},variant:"outlined",color:"secondary"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))})),ne=n(138),ae=n(133),re=n.n(ae),ie=n(18),ce=n(323),oe=n(332),ue=n(324),le=n(23),se=n(313),de=n(314),fe=n(315),me=function(e,t){return{rusText:e,value:t}},pe=function(e){var t=Object(le.a)("Hh Mm Ss"),n="";return t.forEach((function(t){switch(t){case"H":n+=Math.trunc(e/3600).toString();break;case"M":n+=Math.trunc(e/60).toString();break;case"S":n+=Math.ceil(e%60).toString();break;default:n+=t}})),n},be=Object(k.b)((function(e){return{generalInfo:e.user.stat.generalInfo}}),(function(e){return{}}))((function(e){var t=e.generalInfo,n=[me("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0445 \u0438\u0433\u0440:",t.countOfGames),me("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0434\u0432\u0438\u043d\u0443\u0442\u044b\u0445 \u043f\u043b\u0430\u0448\u0435\u043a:",t.countOfSteps),me("\u0412\u0440\u0435\u043c\u044f \u0432 \u0438\u0433\u0440\u0435:",pe(t.spentTime))];return i.a.createElement(se.a,null,n.map((function(e){return i.a.createElement(de.a,{key:Object(A.a)()},i.a.createElement(fe.a,{primary:e.rusText,secondary:e.value}))})))})),he=function(e){var t=Object(le.a)("Mm Ss"),n="";return t.forEach((function(t){switch(t){case"M":n+=Math.trunc(e/60).toString();break;case"S":n+=(e%60).toFixed(2);break;default:n+=t}})),n},Ee=function(e,t){return{rusText:e,value:t}},ge=Object(k.b)((function(e){return{bestGame:e.user.stat.bestGame}}),(function(e){return{}}))((function(e){var t=e.bestGame,n=[Ee("\u0417\u0430\u0442\u0440\u0430\u0447\u0435\u043d\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f:",he(t.spentTime)),Ee("\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0434\u0432\u0438\u043d\u0443\u0442\u044b\u0445 \u043f\u043b\u0430\u0448\u0435\u043a:",t.countOfSteps),Ee("\u0414\u0430\u0442\u0430:",t.date)];return i.a.createElement(se.a,null,n.map((function(e){return i.a.createElement(de.a,{key:Object(A.a)()},i.a.createElement(fe.a,{primary:e.rusText,secondary:e.value}))})))})),ve=n(68),Oe=n(318),Se=n(319),ye=n(321),je=n(317),ke=n(322),we=n(320),Te=n(316),xe=n(98),Ce=n(135),_e=n.n(Ce),Ie=n(134),ze=n.n(Ie);function Ae(e){var t=e.row,n=e.position,a=i.a.useState(!1),r=Object(h.a)(a,2),c=r[0],o=r[1],u=l();return i.a.createElement(i.a.Fragment,null,i.a.createElement(Te.a,{className:u.leaderboard},i.a.createElement(je.a,{style:{padding:0}},i.a.createElement(Oe.a,{"aria-label":"expand row",size:"small",onClick:function(){return o(!c)}},c?i.a.createElement(ze.a,null):i.a.createElement(_e.a,null))),i.a.createElement(je.a,{component:"th",scope:"row"},"".concat(n,". ").concat(t.user)),i.a.createElement(je.a,{align:"right"},function(e){var t=Object(le.a)("Mm Ss"),n="";return t.forEach((function(t){switch(t){case"M":n+=Math.trunc(e/60).toString();break;case"S":n+=(e%60).toFixed(2);break;default:n+=t}})),n}(t.spentTime))),i.a.createElement(Te.a,null,i.a.createElement(je.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6},i.a.createElement(ve.a,{in:c,timeout:"auto",unmountOnExit:!0},i.a.createElement(b.a,{m:1,mb:4},i.a.createElement(Se.a,{size:"small","aria-label":"purchases"},i.a.createElement(we.a,null,i.a.createElement(Te.a,null,i.a.createElement(je.a,null,"\u0414\u0430\u0442\u0430"),i.a.createElement(je.a,null,"\u0428\u0430\u0433\u043e\u0432"))),i.a.createElement(ye.a,null,i.a.createElement(Te.a,null,i.a.createElement(je.a,{component:"th",scope:"row"},t.date),i.a.createElement(je.a,{component:"th",scope:"row"},t.countOfSteps)))))))))}var Ge=Object(k.b)((function(e){return{leaderboard:e.leaderboard}}),null)((function(e){var t=e.leaderboard;return i.a.createElement(ke.a,{component:xe.a},i.a.createElement(Se.a,{size:"small","aria-label":"collapsible table"},i.a.createElement(we.a,null,i.a.createElement(Te.a,null,i.a.createElement(je.a,null),i.a.createElement(je.a,null,"\u0418\u043c\u044f"),i.a.createElement(je.a,null,"\u0412\u0440\u0435\u043c\u044f"))),i.a.createElement(ye.a,null,t.map((function(e,t){return i.a.createElement(Ae,{key:Object(A.a)(),position:t+1,row:e})})))))}));function Ne(e){var t=e.children,n=e.value,a=e.index,r=Object(ne.a)(e,["children","value","index"]);return i.a.createElement("div",Object.assign({role:"tabpanel",hidden:n!==a,id:"full-width-tabpanel-".concat(a),"aria-labelledby":"full-width-tab-".concat(a)},r),n===a&&i.a.createElement(b.a,null,t))}function Me(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}var Re=Object(k.b)((function(e){return{user:e.user.data}}),(function(e){return{CState:{userSignOut:function(){return e(D())}}}}))((function(e){var t=e.user,n=e.CState,a=l(),r=Object(ie.a)(),c=i.a.useState(0),o=Object(h.a)(c,2),u=o[0],s=o[1];return i.a.createElement("div",null,i.a.createElement(d.a,{className:a.authorization,alignItems:"center",container:!0,direction:"column"},i.a.createElement(Z.a,{fontSize:"large"}),i.a.createElement(b.a,{width:1,my:2},i.a.createElement(f.a,{align:"center"},t.name),i.a.createElement(b.a,{width:1,display:"flex",justifyContent:"center"}," ",i.a.createElement(T.a,{onClick:function(){n.userSignOut()},color:"secondary"},"\u0412\u044b\u0445\u043e\u0434")," "))),i.a.createElement(ce.a,{className:a.userTabs,position:"static",color:"default"},i.a.createElement(oe.a,{value:u,onChange:function(e,t){s(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto","aria-label":"scrollable auto tabs example"},i.a.createElement(ue.a,Object.assign({label:"\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"},Me(0))),i.a.createElement(ue.a,Object.assign({label:"\u041b\u0443\u0447\u0448\u0438\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"},Me(1))),i.a.createElement(ue.a,Object.assign({label:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430 \u043b\u0438\u0434\u0435\u0440\u043e\u0432"},Me(2))))),i.a.createElement(re.a,{axis:"rtl"===r.direction?"x-reverse":"x",index:u,onChangeIndex:function(e){s(e)}},i.a.createElement(Ne,{value:u,index:0,dir:r.direction},i.a.createElement(be,null)),i.a.createElement(Ne,{value:u,index:1,dir:r.direction},i.a.createElement(ge,null)),i.a.createElement(Ne,{value:u,index:2,dir:r.direction},i.a.createElement(Ge,null))))})),Ue=Object(k.b)((function(e){return{user:e.user.data}}),(function(e){return{}}))((function(e){var t=e.user,n=l();return i.a.createElement(m.a,{className:n.height100},i.a.createElement(p.a,{className:n.cardContentUser},i.a.createElement(b.a,{py:3},t.token?i.a.createElement(Re,null):i.a.createElement(te,null))))})),De=n(47),Be=n(97),We=n(136),Le=n.n(We),Ke=n(3),Pe=Object(k.b)((function(e,t){return{loadingInterface:e.loading.skeleton,currentGame:e.user.stat.currentGame,setSort:t.setSort}}),(function(e){return{CState:{setStartGame:function(t){return e(K(t))}}}}))((function(e){var t=e.loadingInterface,n=e.currentGame,a=e.CState,r=e.setSort;return i.a.createElement(i.a.Fragment,null,t?i.a.createElement(Y.a,{animation:"wave",variant:"rect",width:"100%",height:35}):i.a.createElement(T.a,{disabled:!!n.startTime&&!n.endTime,size:"large",onClick:function(){a.setStartGame(Date.now()),r()},variant:"contained",color:"primary"},"\u041d\u043e\u0432\u0430\u044f \u0438\u0433\u0440\u0430"))})),Fe={top:0,left:0,bottom:0,right:0},Ve=function(e){var t=Object(le.a)(e);return t=function(e){var t=e.indexOf(e.find((function(e){return void 0===e.id})));return e.map((function(e,n){return e.bounds=Object(E.a)({},Fe),t>n?t-n!==1||[3,7,11].filter((function(e){return e===n})).length?t-n===4&&(e.bounds.bottom=e.size+2*e.margin):e.bounds.right=e.size+2*e.margin:n-t!==1||[4,8,12].filter((function(e){return e===n})).length?n-t===4&&(e.bounds.top=-(e.size+2*e.margin)):e.bounds.left=-(e.size+2*e.margin),e}))}(t)},qe=function(e){for(var t=[].concat(Object(le.a)(Array(e-1).keys()),[void 0]),n=t.length;n>1;n--){var a=Math.floor(Math.random()*n),r=t[n-1];t[n-1]=t[a],t[a]=r}return t},Xe=function(e){for(var t=Math.sqrt(e.length)-Math.trunc(e.indexOf(void 0)/Math.sqrt(e.length)),n=0,a=0;a<e.length;a++)for(var r=a+1;r<e.length;r++)void 0!==e[a]&&void 0!==e[r]&&e[a]>e[r]&&n++;return 1&Math.sqrt(e.length)||1&t?!(1&n):!!(1&n)},He=function(){var e=Object(k.c)(),t=Object(k.d)((function(e){return e.user.stat.currentGame})),n=Object(r.useState)(Object(le.a)(Array(16).keys()).map((function(e,t){return{id:15===t?void 0:t,key:Object(A.a)(),margin:5,size:0,x:0,y:0,bounds:Fe}}))),a=Object(h.a)(n,2),i=a[0],c=a[1],o=Object(r.useCallback)((function(){c((function(e){var t=function(e){var t=[];do{t=qe(e)}while(!Xe(t));return t}(e.length),n=Object(le.a)(e).sort((function(e,n){return t.indexOf(e.id)-t.indexOf(n.id)}));return n=Ve(n)}))}),[i.length]);return Object(r.useEffect)((function(){(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.filter((function(e,t){return e.id===t})).length;return 15===t})(i)&&t.startTime&&e(V(!0))}),[i,e,t.startTime]),[i,function(e){c((function(t){return t.map((function(t){return Object(E.a)(Object(E.a)({},t),{},{size:e})}))}))},o,function(e){c((function(t){var n=Object(le.a)(t),a=i.indexOf(i.find((function(e){return void 0===e.id}))),r=n[a];return n[a]=n[e],n[e]=r,n=Ve(n)}))}]},Je=Object(k.b)((function(e){return{currentGame:e.user.stat.currentGame,loadingInterface:e.loading.skeleton}}),(function(e){return{CState:{enqueueSnackbar:function(){return e(G.apply(a,arguments))},setEndGame:function(t){return e(P(t))},setCountOfSteps:function(t){return e(F(t))},setIsWin:function(t){return e(V(t))}}}}))((function(e){var t=e.currentGame,n=e.loadingInterface,a=e.CState,c=l(),o=He(),u=Object(h.a)(o,4),s=u[0],f=u[1],g=u[2],v=u[3],O=Object(r.useRef)(null);Object(r.useEffect)((function(){O&&f(O.current.offsetWidth/4-17)}),[O]),Object(r.useEffect)((function(){t.isWin&&(console.log("You WIN. Count of steps: "+t.countOfSteps),a.setEndGame(Date.now()),a.enqueueSnackbar({message:"\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u0435\u043c! \u0412\u044b \u0432\u044b\u0438\u0433\u0440\u0430\u043b\u0438!",options:{key:Object(A.a)(),variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"}}}))}),[t.isWin]);return i.a.createElement(m.a,{className:c.gameTableWr},i.a.createElement(Be.a,{in:!n},i.a.createElement(p.a,{className:c.cardContent},i.a.createElement(d.a,{ref:O,className:c.gameTable,container:!0},s.map((function(e,n){var r;return i.a.createElement(Le.a,{disabled:!t.startTime||t.startTime&&t.endTime,key:e.key,bounds:Object(E.a)({},e.bounds),position:{x:e.x,y:e.y},onStop:function(r,i){!function(e,n,r,i){(Math.abs(n.x)>(r.margin+r.size)/2||Math.abs(n.y)>(r.margin+r.size)/2)&&(a.setCountOfSteps(t.countOfSteps+1),v(i))}(0,i,e,n)}},i.a.createElement(b.a,{className:Object(Ke.default)((r={},Object(De.a)(r,c.puzzles,!0),Object(De.a)(r,"red",void 0===e.id),Object(De.a)(r,"green",e.id===n),r)),width:e.size,height:e.size,display:"flex",alignItems:"center",justifyContent:"center",m:"".concat(e.margin,"px")},"".concat((e.id+1).toString())))}))),i.a.createElement(b.a,{width:1,display:"flex",justifyContent:"center",py:3},i.a.createElement(Pe,{setSort:g})))))})),Qe=n(81),Ye=Object(k.b)((function(e){return{notifications:e.notifications}}),(function(e){return{CState:{removeSnackbar:function(t){return e(M(t))}}}}))((function(e){var t=e.notifications,n=e.CState,a=Object(Qe.useSnackbar)(),i=a.enqueueSnackbar,c=a.closeSnackbar,o=Object(r.useState)([]),u=Object(h.a)(o,2),l=u[0],s=u[1];return Object(r.useEffect)((function(){t.forEach((function(e){var t=e.key,a=e.message,r=e.options,o=void 0===r?{}:r,u=e.dismissed;void 0!==u&&u?c(t):l.includes(t)||(i(a,Object(E.a)(Object(E.a)({key:t},o),{},{onClose:function(e,t,n){o.onclose&&o.onclose(e,t,n)},onExited:function(e,t){n.removeSnackbar(t),s((function(e){return Object(le.a)(e.filter((function(e){return e!==t})))}))}})),s((function(e){return[].concat(Object(le.a)(e),[t])})))}))}),[t,c,i]),null})),$e=Object(k.b)((function(e){return{}}),(function(e){return{}}))((function(){var e=l();return i.a.createElement(s.a,{fixed:!0,className:e.container,maxWidth:"md"},i.a.createElement(d.a,{container:!0,direction:"column",justify:"center",className:e.root,spacing:2},i.a.createElement(d.a,{item:!0,container:!0,xs:12},i.a.createElement(f.a,{variant:"h3",component:"h1",gutterBottom:!0},"\u041f\u044f\u0442\u043d\u0430\u0448\u043a\u0438")),i.a.createElement(d.a,{item:!0,container:!0,xs:12,spacing:3},i.a.createElement(d.a,{item:!0,container:!0,xs:7,direction:"row"},i.a.createElement(Je,null)),i.a.createElement(d.a,{item:!0,container:!0,xs:5,direction:"column"},i.a.createElement(Ue,null))),i.a.createElement(Ye,null)))})),Ze=n(328),et=n(329),tt=Object(k.b)((function(e){return{backdrop:e.loading.backdrop}}),null)((function(e){var t=e.backdrop,n=l();return i.a.createElement(Ze.a,{className:n.backdrop,open:t},i.a.createElement(et.a,{color:"inherit"}))}));var nt=Object(k.b)((function(e){return{}}),(function(e){return{CState:{setUserData:function(t,n,a){return e(L(t,n,a))},setBestGame:function(t){return e(q(t))},setLeaderboard:function(t){return e(Q(t))},setGeneralInfo:function(t){return e(X(t))}}}}))((function(e){var t=e.CState;return Object(r.useEffect)((function(){var e,n,a;z.auth().onAuthStateChanged((function(r){r?(t.setUserData(r.displayName,r.xa,r.uid),(e=z.database().ref("users/"+r.uid+"/bestGame/")).on("value",(function(e){t.setBestGame(e.val())})),(n=z.database().ref("games").orderByChild("spentTime").limitToFirst(10)).on("value",(function(e){var n=[];e.forEach((function(e){n.push(e.val())})),t.setLeaderboard(n)})),(a=z.database().ref("users/"+r.uid+"/generalInfo")).on("value",(function(e){t.setGeneralInfo(e.val())}))):(e&&e.off(),n&&n.off(),a&&a.off(),t.setUserData("","",""))}))}),[]),i.a.createElement(Qe.SnackbarProvider,{maxSnack:3},i.a.createElement($e,null),i.a.createElement(tt,null))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var at=n(24),rt=n(137),it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(E.a)(Object(E.a)({},e),t.payload);default:return e}},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BEST_GAME":return Object(E.a)(Object(E.a)({},e),t.payload);default:return e}},ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_START_GAME":case"SET_END_GAME":case"SET_COUNT_OF_STEPS":case"SET_ISWIN":return Object(E.a)(Object(E.a)({},e),t.payload);default:return e}},ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GENERAL_INFO":return Object(E.a)(Object(E.a)({},e),t.payload);default:return e}},lt=Object(at.c)({bestGame:ct,currentGame:ot,generalInfo:ut}),st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_VALIDATION":return Object(E.a)(Object(E.a)({},e),t.payload);default:return e}},dt=Object(at.c)({data:it,stat:lt,validation:st}),ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LEADER_BOARD":return t.payload;default:return e}},mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ENQUEUE_SNACKBAR":return[].concat(Object(le.a)(e),[Object(E.a)({key:t.key},t.notification)]);case"CLOSE_SNACKBAR":return e.map((function(e){return t.dismissAll||e.key===t.key?Object(E.a)(Object(E.a)({},e),{},{dismissed:!0}):Object(E.a)({},e)}));case"REMOVE_SNACKBAR":return e.filter((function(e){return e.key!==t.key}));default:return e}},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BACKDROP":return t.payload;default:return e}},bt=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SKELETON":return t.payload;default:return e}},ht=Object(at.c)({backdrop:pt,skeleton:bt}),Et={user:{data:{name:"",token:"",uid:""},stat:{generalInfo:{countOfGames:0,countOfSteps:0,spentTime:0},bestGame:{date:0,spentTime:0,countOfSteps:0},currentGame:{startTime:0,endTime:0,isWin:!1,countOfSteps:0}},validation:{email:{error:!1,text:""},name:{error:!1,text:""},password:{error:!1,text:""}}},loading:{backdrop:!1,skeleton:!0},leaderboard:[],notifications:[]},gt=Object(at.c)({user:dt,leaderboard:ft,notifications:mt,loading:ht}),vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(E.a)({},Et),t=arguments.length>1?arguments[1]:void 0;return"USER_SIGN_OUT"===t.type&&(e=Object(E.a)({},Et)),gt(e,t)},Ot=Object(at.a)(rt.a),St=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||at.d,yt=Object(at.e)(vt,St(Ot));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(k.a,{store:yt},i.a.createElement(nt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[152,1,2]]]);
//# sourceMappingURL=main.b4cee49a.chunk.js.map